<% content_for :title, "Property Search" %>

<%= javascript_importmap_tags %>
<script>
    var mapData = <%= raw @map_data %>;
</script>

<div id="map" style="height: 500px; width: 100%;"></div>

<div class='flex flex-col'>
  <%= form_with(url: "/", method: "get", local: true, :class => "self-end p-8") do %>
    <%= text_field_tag(:search, params[:search], :class => "rounded border-gray-200 shadow-sm") %>
    <%= submit_tag("Search", :class => "border rounded py-2 px-5 w-fit mt-8 bg-blue-200 shadow-sm hover:bg-blue-500") %>
  <% end %>

  <div id="property_units" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4">
    <% @property_units.each do |property|%>
      <div class="py-8 px-12">
        <%= render partial: "properties/property_card", locals: {property_unit: property} %>
      </div>
    <% end %>
  </div>

  <div class='self-center p-8'>
    <%= paginate @property_units %>
  </div>
</div>
